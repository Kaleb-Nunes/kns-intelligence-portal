<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNS | Acesso Corporativo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { background: #050505; color: #fff; height: 100vh; display: flex; justify-content: center; align-items: center; font-family: 'Inter', sans-serif; overflow: hidden; margin: 0; }
        .bg-grid { position: absolute; width: 100%; height: 100%; background: linear-gradient(rgba(0, 229, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 229, 255, 0.03) 1px, transparent 1px); background-size: 40px 40px; z-index: 0; }
        
        .login-box { background: #111; padding: 40px; border-radius: 8px; border: 1px solid #333; width: 400px; text-align: center; box-shadow: 0 0 50px rgba(0,229,255,0.1); position: relative; z-index: 10; }
        
        h1 { color: #fff; margin-bottom: 5px; font-size: 24px; letter-spacing: -1px; }
        h1 span { color: #00E5FF; }
        p.subtitle { color: #666; font-size: 11px; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px; }
        
        .input-group { position: relative; margin-bottom: 15px; }
        .input-group i { position: absolute; left: 15px; top: 12px; color: #555; }
        input { width: 100%; padding: 12px 12px 12px 40px; background: #0a0a0a; border: 1px solid #333; color: #fff; border-radius: 4px; outline: none; transition: 0.3s; box-sizing: border-box; }
        input:focus { border-color: #00E5FF; box-shadow: 0 0 10px rgba(0,229,255,0.1); }
        
        .check-area { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; font-size: 12px; color: #888; text-align: left; }
        input[type="checkbox"] { width: 16px; margin: 0; accent-color: #00E5FF; cursor: not-allowed; }
        .link-termos { color: #00E5FF; text-decoration: underline; cursor: pointer; }
        
        button { width: 100%; padding: 12px; background: #222; color: #555; border: none; border-radius: 4px; font-weight: bold; cursor: not-allowed; transition: 0.3s; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; }
        button.active { background: #00E5FF; color: #000; cursor: pointer; }
        button.active:hover { box-shadow: 0 0 20px rgba(0,229,255,0.4); }

        .create-account { margin-top: 20px; font-size: 12px; color: #666; }
        .create-account span { color: #00E5FF; cursor: pointer; font-weight: bold; text-decoration: none; }
        .create-account span:hover { text-decoration: underline; }

        /* MODAIS */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { background: #151515; width: 500px; padding: 30px; border: 1px solid #333; border-radius: 8px; display: flex; flex-direction: column; position: relative; }
        .term-text { flex: 1; overflow-y: auto; text-align: justify; font-size: 13px; color: #ccc; line-height: 1.6; margin: 20px 0; padding-right: 10px; border-bottom: 1px solid #333; max-height: 60vh; }
        .btn-action { background: #00E5FF; color: #000; cursor: pointer; width: 100%; padding: 12px; border: none; font-weight: bold; border-radius: 4px; }
        .close-modal { position: absolute; top: 15px; right: 15px; color: #666; cursor: pointer; font-size: 18px; }
    </style>
</head>
<body>
    <div class="bg-grid"></div>

    <div class="login-box">
        <h1>KNS <span>ENTERPRISE</span></h1>
        <p class="subtitle">Secure Service Portal v6.0</p>
        
        <form onsubmit="fazerLogin(event)">
            <div class="input-group">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="login_email" placeholder="E-mail Corporativo" required>
            </div>
            <div class="input-group">
                <i class="fa-solid fa-lock"></i>
                <input type="password" id="login_senha" placeholder="Senha" required>
            </div>
            
            <div class="check-area">
                <input type="checkbox" id="check_compliance" disabled>
                <span>Concordo com os <span class="link-termos" onclick="abrirModal('modal-termos')">Termos de Uso</span>.</span>
            </div>
            
            <button type="submit" id="btn-entrar" disabled><i class="fa-solid fa-lock"></i> Aguardando Aceite</button>
        </form>

        <div class="create-account">
            Novo colaborador? <span onclick="abrirModal('modal-cadastro')">Criar Acesso</span>
        </div>
        
        <div style="margin-top: 20px; font-size: 10px; color: #444;">
            SYSTEM SECURED BY KNS PROTOCOL
        </div>
    </div>

    <div id="modal-termos" class="modal-overlay">
        <div class="modal-content">
            <h2 style="color:#fff; margin:0;">Termos de Uso</h2>
            <div class="term-text">
                <p>1. O acesso é pessoal e intransferível.</p>
                <p>2. Todas as ações são monitoradas para fins de auditoria.</p>
                <p>3. O uso indevido resultará em bloqueio imediato.</p>
                <p style="color: #00E5FF;">Clique abaixo para assinar digitalmente.</p>
            </div>
            <button type="button" class="btn-action" onclick="aceitarTermos()">LI E CONCORDO</button>
        </div>
    </div>

    <div id="modal-cadastro" class="modal-overlay">
        <div class="modal-content">
            <i class="fa-solid fa-times close-modal" onclick="fecharModal('modal-cadastro')"></i>
            <h2 style="color:#fff; margin-bottom: 20px; text-align: center;">Novo Cadastro</h2>
            
            <div class="input-group">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="cad_nome" placeholder="Nome Completo">
            </div>
            <div class="input-group">
                <i class="fa-solid fa-envelope"></i>
                <input type="text" id="cad_email" placeholder="E-mail Corporativo">
            </div>
            <div class="input-group">
                <i class="fa-solid fa-briefcase"></i>
                <input type="text" id="cad_cargo" placeholder="Cargo / Função">
            </div>
            <div class="input-group">
                <i class="fa-solid fa-lock"></i>
                <input type="password" id="cad_senha" placeholder="Definir Senha">
            </div>

            <button type="button" class="btn-action" onclick="criarUsuario()">CRIAR CONTA</button>
        </div>
    </div>

    <script>
        // Inicializa Banco de Dados Local se não existir
        if (!localStorage.getItem('kns_db_users')) {
            // Cria usuário Admin Padrão
            const adminUser = [{
                nome: "Kaleb Nunes",
                email: "admin",
                cargo: "Head of Engineering",
                senha: "admin"
            }];
            localStorage.setItem('kns_db_users', JSON.stringify(adminUser));
        }

        // --- SISTEMA DE MODAIS ---
        function abrirModal(id) { document.getElementById(id).style.display = 'flex'; }
        function fecharModal(id) { document.getElementById(id).style.display = 'none'; }

        // --- COMPLIANCE ---
        function aceitarTermos() {
            fecharModal('modal-termos');
            const check = document.getElementById('check_compliance');
            check.disabled = false;
            check.checked = true;
            
            const btn = document.getElementById('btn-entrar');
            btn.disabled = false;
            btn.classList.add('active');
            btn.innerHTML = "ACESSAR SISTEMA <i class='fa-solid fa-arrow-right'></i>";
        }

        // --- CRIAR USUÁRIO ---
        function criarUsuario() {
            const nome = document.getElementById('cad_nome').value;
            const email = document.getElementById('cad_email').value;
            const cargo = document.getElementById('cad_cargo').value;
            const senha = document.getElementById('cad_senha').value;

            if(!nome || !email || !senha) {
                alert("Por favor, preencha todos os campos obrigatórios.");
                return;
            }

            // Pega usuários existentes
            let users = JSON.parse(localStorage.getItem('kns_db_users'));
            
            // Verifica duplicidade
            const existe = users.find(u => u.email === email);
            if(existe) {
                alert("Este e-mail já está cadastrado.");
                return;
            }

            // Salva novo
            users.push({ nome, email, cargo, senha });
            localStorage.setItem('kns_db_users', JSON.stringify(users));

            alert("Conta criada com sucesso! Faça login.");
            fecharModal('modal-cadastro');
        }

        // --- LOGIN REAL ---
        function fazerLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login_email').value;
            const senha = document.getElementById('login_senha').value;
            const btn = document.getElementById('btn-entrar');

            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> VERIFICANDO...';

            setTimeout(() => {
                // Busca no banco local
                const users = JSON.parse(localStorage.getItem('kns_db_users'));
                const userValido = users.find(u => u.email === email && u.senha === senha);

                if (userValido) {
                    // Salva sessão com os dados do usuário encontrado
                    localStorage.setItem('kns_session', JSON.stringify(userValido));
                    window.location.href = 'dashboard.html';
                } else {
                    btn.innerHTML = '<i class="fa-solid fa-times"></i> DADOS INCORRETOS';
                    btn.style.background = '#e74c3c';
                    setTimeout(() => {
                        btn.innerHTML = "ACESSAR SISTEMA <i class='fa-solid fa-arrow-right'></i>";
                        btn.style.background = '#00E5FF';
                    }, 2000);
                }
            }, 1000);
        }
    </script>
</body>
</html>

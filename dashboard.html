<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>KNS Service Management | Enterprise Workspace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-body: #101214; --bg-sidebar: #1b1d21; --bg-panel: #212429; --border: #2e3238; --primary: #00E5FF; --accent-green: #2ecc71; --accent-orange: #f39c12; --accent-red: #e74c3c; --text-main: #e6e8eb; --text-muted: #9499a3; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg-body); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; }
        
        .sidebar { width: 260px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 15px; }
        .brand-area { padding: 15px 0 30px 0; font-size: 18px; font-weight: 700; color: #fff; display: flex; align-items: center; gap: 10px; }
        .brand-area span { color: var(--primary); }
        .nav-label { font-size: 10px; text-transform: uppercase; color: #555; margin: 15px 0 5px 10px; font-weight: 700; letter-spacing: 0.5px; }
        .nav-item { display: flex; align-items: center; padding: 10px 15px; color: var(--text-muted); text-decoration: none; border-radius: 6px; margin-bottom: 2px; transition: 0.2s; font-size: 13px; cursor: pointer; }
        .nav-item:hover, .nav-item.active { background: rgba(0, 229, 255, 0.08); color: var(--primary); }
        .nav-item i { width: 20px; margin-right: 10px; text-align: center; }

        .main-wrapper { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .topbar { height: 60px; background: var(--bg-panel); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; padding: 0 25px; }
        .search-global { background: var(--bg-body); border: 1px solid var(--border); padding: 8px 15px; border-radius: 4px; width: 400px; color: #fff; display: flex; align-items: center; gap: 10px; font-size: 13px; }
        .search-global input { background: transparent; border: none; outline: none; color: #fff; width: 100%; }
        .user-actions { display: flex; align-items: center; gap: 20px; }
        .user-dropdown-container { position: relative; }
        .avatar { width: 35px; height: 35px; background: #333; border-radius: 50%; color: #fff; display: flex; align-items: center; justify-content: center; font-weight: 600; cursor: pointer; border: 1px solid var(--border); overflow: hidden; }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }
        
        .dropdown-menu { display: none; position: absolute; top: 45px; right: 0; width: 220px; background: var(--bg-panel); border: 1px solid var(--border); border-radius: 6px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 999; }
        .dropdown-item { padding: 12px 15px; border-bottom: 1px solid var(--border); font-size: 12px; color: var(--text-muted); cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 10px; }
        .dropdown-item:hover { background: #2a2e35; color: #fff; }

        .content-area { flex: 1; padding: 30px; overflow-y: auto; background: var(--bg-body); }
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }
        .kpi-card { padding: 20px; border-radius: 6px; color: #fff; position: relative; overflow: hidden; height: 120px; background: var(--bg-panel); border: 1px solid var(--border); }
        .kpi-value { font-size: 32px; font-weight: 700; margin-bottom: 5px; }
        .kpi-label { font-size: 12px; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.5px; }

        .data-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .data-table th { text-align: left; padding: 12px; background: #1a1c21; color: #fff; border-bottom: 2px solid var(--border); }
        .data-table td { padding: 12px; border-bottom: 1px solid var(--border); color: var(--text-muted); }
        .data-table tr:hover { background: #1a1c21; cursor: pointer; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
        .bg-new { background: rgba(0, 229, 255, 0.1); color: var(--primary); }
        .bg-wait { background: rgba(243, 156, 18, 0.1); color: var(--accent-orange); }
        .bg-done { background: rgba(46, 204, 113, 0.1); color: var(--accent-green); }

        .form-label { display: block; color: var(--text-muted); font-size: 11px; font-weight: 600; margin-bottom: 5px; }
        .form-control { width: 100%; padding: 10px; background: #16181c; border: 1px solid var(--border); color: #fff; border-radius: 4px; font-size: 13px; outline: none; margin-bottom: 15px; }
        .form-control:focus { border-color: var(--primary); }
        .form-control:disabled { background: #111; color: #666; border-color: transparent; }

        .bi-frame { height: 600px; width: 100%; background: #16181c; border: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(20px); }
        .profile-tag { background: rgba(0,229,255,0.1); color: var(--primary); padding: 4px 10px; border-radius: 4px; font-size: 11px; border: 1px solid rgba(0,229,255,0.2); display: inline-block; margin-right: 5px; margin-bottom: 5px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .fa-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="brand-area"><i class="fa-solid fa-cloud-bolt"></i> KNS <span>SERVICE</span></div>
        <div class="nav-label">Espaço de Trabalho</div>
        <div id="nav-home" class="nav-item active" onclick="app.navigate('home')"><i class="fa-solid fa-house"></i> Home / Dashboard</div>
        <div id="nav-new" class="nav-item" onclick="app.openModal('modal-new-ticket')"><i class="fa-solid fa-plus-circle"></i> Novo Chamado</div>
        <div id="nav-tickets" class="nav-item" onclick="app.navigate('tickets')"><i class="fa-solid fa-list-ul"></i> Meus Chamados</div>
        <div class="nav-label">Gestão</div>
        <div id="nav-approvals" class="nav-item" onclick="app.navigate('approvals')"><i class="fa-solid fa-check-double"></i> Aprovações (2)</div>
        <div id="nav-bi" class="nav-item" onclick="app.navigate('bi')"><i class="fa-solid fa-chart-pie"></i> Monitoramento BI</div>
        <div class="nav-label">Auto-Atendimento</div>
        <div class="nav-item" onclick="app.openServiceModal('reembolso')"><i class="fa-solid fa-receipt"></i> Reembolso</div>
        <div class="nav-item" onclick="app.openServiceModal('acesso')"><i class="fa-solid fa-id-badge"></i> Acesso Predial</div>
    </div>

    <div class="main-wrapper">
        <div class="topbar">
            <div class="search-global"><i class="fa-solid fa-magnifying-glass"></i><input type="text" placeholder="Pesquisar incidente..."></div>
            <div class="user-actions">
                <i class="fa-regular fa-bell" style="color: #ccc; cursor: pointer;"></i>
                <div style="text-align: right; line-height: 1.2;"><div style="font-size: 12px; color: #fff; font-weight: 600;">Kaleb Nunes</div><div style="font-size: 11px; color: #666;">Admin</div></div>
                <div class="user-dropdown-container">
                    <div class="avatar" onclick="app.toggleMenu()" id="header-avatar">K</div>
                    <div id="user-menu" class="dropdown-menu">
                        <div class="dropdown-item" onclick="app.openProfileModal()"><i class="fa-solid fa-user"></i> Meu Perfil</div>
                        <div class="dropdown-item" onclick="app.openConfigModal()"><i class="fa-solid fa-gear"></i> Configurações</div>
                        <div class="dropdown-item" onclick="app.logout()" style="color: var(--accent-red);"><i class="fa-solid fa-power-off"></i> Sair</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <div id="view-home" class="view-section active">
                <h2 style="margin-bottom: 20px; font-size: 16px;">Visão Geral</h2>
                <div class="kpi-grid">
                    <div class="kpi-card" style="border-left: 3px solid var(--accent-orange);"><div class="kpi-value" style="color: var(--accent-orange);">12</div><div class="kpi-label">Aguardando Aprovação</div></div>
                    <div class="kpi-card" style="border-left: 3px solid var(--primary);"><div class="kpi-value" style="color: var(--primary);">5</div><div class="kpi-label">Novos Incidentes</div></div>
                    <div class="kpi-card" style="border-left: 3px solid var(--accent-green);"><div class="kpi-value" style="color: var(--accent-green);">84</div><div class="kpi-label">Resolvidos (Mês)</div></div>
                    <div class="kpi-card" style="border-left: 3px solid var(--accent-red);"><div class="kpi-value" style="color: var(--accent-red);">1</div><div class="kpi-label">SLA Vencido</div></div>
                </div>
                <h3 style="margin-bottom: 15px; font-size: 14px; margin-top: 40px;">Meus Chamados Recentes</h3>
                <table class="data-table"><thead><tr><th>Número</th><th>Título</th><th>Serviço</th><th>Status</th><th>Data</th></tr></thead><tbody><tr><td>INC-1029</td><td>Erro de Acesso VPN</td><td>Infraestrutura</td><td><span class="badge bg-wait">Em Análise</span></td><td>Hoje 10:30</td></tr><tr><td>REQ-9921</td><td>Novo Mouse</td><td>Periféricos</td><td><span class="badge bg-new">Novo</span></td><td>Ontem 16:00</td></tr></tbody></table>
            </div>
            <div id="view-tickets" class="view-section">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px;"><h2>Todos os Chamados</h2><button onclick="app.openModal('modal-new-ticket')" style="background: var(--primary); color: #000; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-weight: 700;">+ Novo</button></div>
                <table class="data-table"><thead><tr><th>ID</th><th>Solicitante</th><th>Assunto</th><th>Prioridade</th><th>Estado</th></tr></thead><tbody><tr><td>INC-1029</td><td>Kaleb Nunes</td><td>VPN Caindo</td><td>Alta</td><td><span class="badge bg-wait">WIP</span></td></tr><tr><td>REQ-1002</td><td>Ana Silva</td><td>Acesso Pasta Rede</td><td>Baixa</td><td><span class="badge bg-done">Fechado</span></td></tr></tbody></table>
            </div>
            <div id="view-bi" class="view-section">
                <h2 style="margin-bottom: 20px;">Analytics Infraestrutura</h2>
                <div class="bi-frame"><i class="fa-solid fa-chart-column" style="font-size: 60px; color: #333; margin-bottom: 20px;"></i><h3 style="color: #666;">Power BI Integration</h3><p style="color: #444; font-size: 12px; margin-top: 10px;">O dashboard "Infra_Prod_v2" está carregando...</p><button style="margin-top: 20px; background: #222; border: 1px solid #444; color: #ccc; padding: 8px 15px; border-radius: 4px; cursor: pointer;">Recarregar Frame</button></div>
            </div>
            <div id="view-approvals" class="view-section">
                <h2>Pendências de Aprovação</h2>
                <div style="background: var(--bg-panel); border: 1px solid var(--border); padding: 20px; border-radius: 6px; margin-top: 15px; display: flex; justify-content: space-between; align-items: center;"><div><div style="font-weight: 700; color: #fff;">Compra de Notebook Dell i7</div><div style="font-size: 12px; color: #888;">Solicitante: João Silva | Valor: R$ 6.500,00</div></div><div><button style="background: var(--accent-green); color: #000; border: none; padding: 6px 15px; border-radius: 4px; cursor: pointer; font-weight: 600;">Aprovar</button><button style="background: transparent; border: 1px solid #666; color: #ccc; padding: 6px 15px; border-radius: 4px; cursor: pointer; margin-left: 10px;">Rejeitar</button></div></div>
            </div>
        </div>
    </div>

    <div id="modal-profile" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; justify-content:center; align-items:center;">
        <div style="background: var(--bg-panel); width: 600px; padding: 30px; border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;"><h3 style="color:#fff;">Ficha do Colaborador</h3><i class="fa-solid fa-xmark" onclick="app.closeModal('modal-profile')" style="color:#666; cursor:pointer;"></i></div>
            <div style="display:flex; gap:25px; margin-bottom:30px;">
                <div style="text-align:center;"><div style="width:100px; height:100px; background:#333; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-size:40px; border:2px solid var(--primary); margin-bottom:10px; overflow:hidden; position:relative;" onclick="document.getElementById('photo-input').click()"><img id="profile-pic-preview" src="" style="display:none; width:100%; height:100%; object-fit:cover;"><span id="profile-initial">K</span><div style="position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.6); font-size:9px; padding:2px;">ALTERAR</div></div><input type="file" id="photo-input" style="display:none;" onchange="app.previewPhoto(this)"></div>
                <div style="flex:1;">
                    <div style="display:flex; justify-content:space-between; align-items:center;"><h2 style="color:#fff; font-size:20px; margin-bottom:5px;">Kaleb Nunes</h2><button onclick="app.enableEditMode()" id="btn-edit-profile" style="background:transparent; border:1px solid #444; color:#ccc; font-size:11px; padding:2px 8px; border-radius:4px; cursor:pointer;">Editar <i class="fa-solid fa-pen"></i></button></div>
                    <input type="text" id="input-role" class="form-control" value="Head of Engineering" disabled style="margin-bottom:15px; background:transparent; border:none; padding:0; color:#888; font-size:14px; width:100%;">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; font-size:13px;"><div><span style="display:block; color:#666; font-size:10px;">DEPTO</span><input id="input-dept" type="text" class="form-control" value="Engenharia" disabled></div><div><span style="display:block; color:#666; font-size:10px;">ID</span><input type="text" class="form-control" value="99021" disabled></div><div><span style="display:block; color:#666; font-size:10px;">EMAIL</span><input id="input-email" type="text" class="form-control" value="kaleb@kns.com" disabled></div><div><span style="display:block; color:#666; font-size:10px;">FONE</span><input id="input-phone" type="text" class="form-control" value="(47) 9999-8821" disabled></div></div>
                </div>
            </div>
            <div style="text-align:right; margin-top:20px; display:flex; justify-content:end; gap:10px;"><button onclick="app.closeModal('modal-profile')" style="background:transparent; border:1px solid #444; color:#ccc; padding:8px 20px; border-radius:4px; cursor:pointer;">Fechar</button><button id="btn-save-profile" onclick="app.saveProfile()" style="display:none; background:var(--primary); border:none; padding:8px 20px; border-radius:4px; font-weight:bold; cursor:pointer; color:#000;">Salvar</button></div>
        </div>
    </div>

    <div id="modal-config" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; justify-content:center; align-items:center;">
        <div style="background: var(--bg-panel); width: 450px; padding: 30px; border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;"><h3 style="color:#fff;">Preferências</h3><i class="fa-solid fa-xmark" onclick="app.closeModal('modal-config')" style="color:#666; cursor:pointer;"></i></div>
            <div style="margin-bottom:20px;"><h4 style="font-size:13px; color:var(--primary); margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:5px;">Notificações</h4><div style="display:flex; justify-content:space-between; align-items:center;"><div><div style="color:#ddd; font-size:13px;">Alertas Email</div></div><label class="switch"><input type="checkbox" checked><span class="slider"></span></label></div></div>
            <div style="text-align:right; margin-top:20px;"><button onclick="app.saveConfig()" id="btn-save-config" style="background:var(--primary); border:none; padding:8px 20px; border-radius:4px; font-weight:bold; cursor:pointer;">Salvar</button></div>
        </div>
    </div>

    <div id="modal-new-ticket" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; justify-content:center; align-items:center;">
        <div style="background: var(--bg-panel); width: 600px; padding: 30px; border-radius: 8px; border: 1px solid var(--border);">
            <h3 style="margin-bottom: 20px; color: #fff;">Novo Incidente</h3>
            <label class="form-label">Título</label><input class="form-control" type="text">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;"><div><label class="form-label">Impacto</label><select class="form-control"><option>Alto</option><option>Baixo</option></select></div><div><label class="form-label">Urgência</label><select class="form-control"><option>Alta</option><option>Baixa</option></select></div></div>
            <div style="text-align: right; margin-top: 10px;"><button onclick="app.closeModal('modal-new-ticket')" style="background: transparent; border: 1px solid #444; color: #ccc; padding: 8px 15px; border-radius: 4px; cursor: pointer; margin-right: 10px;">Cancelar</button><button onclick="alert('Criado!'); app.closeModal('modal-new-ticket')" style="background: var(--primary); color: #000; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">Registrar</button></div>
        </div>
    </div>

    <div id="modal-simple" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; justify-content:center; align-items:center;">
        <div style="background: var(--bg-panel); width: 400px; padding: 25px; border-radius: 8px; border: 1px solid var(--border);">
            <h3 id="modal-simple-title" style="margin-bottom: 15px; color: #fff;">Solicitação</h3>
            <div id="modal-simple-body"></div>
            <div style="margin-top: 20px; text-align: right;"><button onclick="app.closeModal('modal-simple')" style="background: transparent; border: 1px solid #444; color: #ccc; padding: 8px 15px; border-radius: 4px; cursor: pointer; margin-right: 10px;">Fechar</button><button onclick="alert('Enviado!'); app.closeModal('modal-simple')" style="background: var(--primary); color: #000; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">Enviar</button></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>KNS Service | Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS RESET & VARS */
        :root { 
            --bg: #0a0b0d; --panel: #1b1e24; --border: #2a2e35; 
            --primary: #00E5FF; --success: #2ecc71; --warning: #f1c40f; --danger: #e74c3c;
            --text: #e1e3e8; --text-muted: #9499a3;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; outline: none; }
        body { background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* SIDEBAR */
        .sidebar { width: 260px; background: #121418; border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 15px; }
        .logo { font-size: 18px; font-weight: 700; color: #fff; margin-bottom: 30px; display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--primary); }
        .nav-label { font-size: 10px; text-transform: uppercase; color: #555; margin: 20px 0 5px 10px; font-weight: 700; }
        .nav-item { padding: 10px 15px; color: var(--text-muted); cursor: pointer; border-radius: 6px; margin-bottom: 2px; display: flex; align-items: center; gap: 10px; font-size: 13px; transition: 0.2s; }
        .nav-item:hover, .nav-item.active { background: rgba(0, 229, 255, 0.08); color: var(--primary); }

        /* MAIN */
        .main { flex: 1; display: flex; flex-direction: column; }
        .topbar { height: 60px; background: var(--panel); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; padding: 0 25px; }
        .search-box { background: var(--bg); border: 1px solid var(--border); padding: 8px 15px; border-radius: 4px; width: 400px; display: flex; gap: 10px; color: #fff; font-size: 13px; }
        .search-box input { background: transparent; border: none; color: #fff; width: 100%; }

        /* USER PROFILE DROPDOWN */
        .user-area { position: relative; }
        .user-trigger { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .avatar { width: 35px; height: 35px; background: #333; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 1px solid var(--border); color: #fff; }
        
        .dropdown { 
            display: none; position: absolute; top: 50px; right: 0; width: 240px; 
            background: var(--panel); border: 1px solid var(--border); border-radius: 6px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 1000; overflow: hidden;
        }
        .user-header { padding: 15px; border-bottom: 1px solid var(--border); text-align: center; background: rgba(0,0,0,0.2); }
        .user-header h4 { font-size: 14px; margin-bottom: 2px; color: #fff; }
        .user-header p { font-size: 11px; color: var(--primary); }
        .btn-client-area { margin-top: 10px; background: transparent; border: 1px solid var(--primary); color: var(--primary); padding: 5px 10px; border-radius: 4px; font-size: 11px; cursor: pointer; width: 100%; }
        .btn-client-area:hover { background: var(--primary); color: #000; }

        .drop-item { padding: 12px 15px; border-bottom: 1px solid var(--border); font-size: 13px; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .drop-item:hover { background: #222; color: #fff; }
        .drop-item.danger { color: var(--danger); }

        /* CONTENT */
        .content { flex: 1; padding: 30px; overflow-y: auto; }
        .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }
        .kpi-card { background: var(--panel); padding: 20px; border-radius: 6px; border: 1px solid var(--border); }
        .kpi-num { font-size: 32px; font-weight: 700; color: #fff; margin-bottom: 5px; }
        .kpi-lbl { font-size: 12px; color: var(--text-muted); text-transform: uppercase; }

        /* MODAIS - SISTEMA ROBUSTO */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; }
        .modal { background: var(--panel); width: 700px; max-height: 90vh; border-radius: 8px; border: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; }
        .modal-header { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); }
        .modal-header h3 { font-size: 16px; color: #fff; }
        .close-btn { cursor: pointer; color: #888; }
        
        /* ABAS DO PERFIL */
        .tabs { display: flex; border-bottom: 1px solid var(--border); }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; font-size: 13px; border-bottom: 2px solid transparent; color: #888; }
        .tab.active { border-bottom-color: var(--primary); color: #fff; background: rgba(0,229,255,0.05); }
        
        .modal-body { padding: 20px; overflow-y: auto; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* FORM ELEMENTS */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .form-label { display: block; font-size: 11px; color: #888; margin-bottom: 5px; font-weight: 600; }
        .form-control { width: 100%; padding: 10px; background: #0a0b0d; border: 1px solid var(--border); color: #fff; border-radius: 4px; font-size: 13px; }
        .form-control:focus { border-color: var(--primary); }
        
        /* NOTIFICATIONS TABLE */
        .notif-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .notif-table th { text-align: left; padding: 10px; border-bottom: 1px solid var(--border); color: #888; }
        .notif-table td { padding: 10px; border-bottom: 1px solid var(--border); color: #fff; }
        .check-box { width: 16px; height: 16px; accent-color: var(--primary); }

        /* TOAST */
        #toast { visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 4px; padding: 16px; position: fixed; z-index: 10000; left: 50%; bottom: 30px; transform: translateX(-50%); border-left: 4px solid var(--primary); }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

        /* CLIENT AREA SPECIFIC */
        .client-stats { display: flex; gap: 20px; }
        .trophy-card { flex: 1; background: #252830; padding: 20px; border-radius: 8px; text-align: center; border: 1px solid var(--border); }
        .trophy-icon { font-size: 60px; color: #f1c40f; margin-bottom: 10px; }
        .progress-bar { background: #333; height: 6px; border-radius: 3px; margin-top: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 70%; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo"><i class="fa-solid fa-cube"></i> KNS <span>SERVICE</span></div>
        
        <div class="nav-label">Espaço de Trabalho</div>
        <div class="nav-item active"><i class="fa-solid fa-house"></i> Home / Dashboard</div>
        <div class="nav-item" onclick="abrirModal('modal-novo-chamado')"><i class="fa-solid fa-plus-circle"></i> Novo Chamado</div>
        <div class="nav-item"><i class="fa-solid fa-list"></i> Lista de Chamados</div>
        
        <div class="nav-label">Gestão</div>
        <div class="nav-item"><i class="fa-solid fa-check-double"></i> Aprovações (2)</div>
        <div class="nav-item"><i class="fa-solid fa-chart-bar"></i> Relatórios</div>
        
        <div class="nav-label">Configurações</div>
        <div class="nav-item" onclick="abrirPerfil('pessoal')"><i class="fa-solid fa-user-gear"></i> Meu Cadastro</div>
        <div class="nav-item" onclick="criarUsuarioDemo()"><i class="fa-solid fa-users"></i> Criar Usuário Demo</div>
    </div>

    <div class="main">
        <div class="topbar">
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" placeholder="Pesquisar por ID, Título ou Assunto...">
            </div>
            
            <div class="user-area">
                <div class="user-trigger" onclick="toggleMenu()">
                    <div style="text-align: right; font-size: 12px;">
                        <div style="font-weight: 700; color: #fff;">Kaleb Nunes</div>
                        <div style="color: #666;">Head of Innovation</div>
                    </div>
                    <div class="avatar">K</div>
                </div>

                <div id="user-menu" class="dropdown">
                    <div class="user-header">
                        <div class="avatar" style="margin: 0 auto 10px auto; width: 50px; height: 50px; font-size: 20px;">K</div>
                        <h4>Kaleb Nunes</h4>
                        <p>TI - Infraestrutura & Redes</p>
                        <button class="btn-client-area" onclick="abrirModal('modal-cliente')">Área do Cliente</button>
                    </div>
                    <div class="drop-item" onclick="abrirPerfil('pessoal')"><i class="fa-regular fa-user"></i> Meu Cadastro</div>
                    <div class="drop-item" onclick="showToast('Sem tempos lançados')"><i class="fa-regular fa-clock"></i> Meus tempos</div>
                    <div class="drop-item"><i class="fa-regular fa-file-alt"></i> Instruções</div>
                    <div class="drop-item"><i class="fa-solid fa-globe"></i> Português do Brasil <i class="fa-solid fa-chevron-right" style="margin-left: auto;"></i></div>
                    <div class="drop-item danger" onclick="logout()"><i class="fa-solid fa-power-off"></i> Sair</div>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="kpi-grid">
                <div class="kpi-card" style="border-left: 4px solid var(--primary);">
                    <div class="kpi-num">12</div>
                    <div class="kpi-lbl">Chamados Abertos</div>
                </div>
                <div class="kpi-card" style="border-left: 4px solid #34495e;">
                    <div class="kpi-num">0</div>
                    <div class="kpi-lbl">Aguardando Aprovação</div>
                </div>
                <div class="kpi-card" style="border-left: 4px solid var(--success);">
                    <div class="kpi-num">84</div>
                    <div class="kpi-lbl">Chamados Concluídos</div>
                </div>
                <div class="kpi-card" style="border-left: 4px solid var(--warning);">
                    <div class="kpi-num">1</div>
                    <div class="kpi-lbl">Vencidos (SLA)</div>
                </div>
            </div>

            <div class="kpi-card">
                <h3 style="margin-bottom: 20px; font-size: 16px; color: #fff;">Meus Chamados Recentes</h3>
                <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                    <thead>
                        <tr style="border-bottom: 2px solid var(--border); text-align: left; color: #888;">
                            <th style="padding: 10px;">Número</th>
                            <th>Título</th>
                            <th>Serviço</th>
                            <th>Status</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody style="color: #ccc;">
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 10px;">#101</td>
                            <td>Erro Acesso VPN</td>
                            <td>Infraestrutura</td>
                            <td style="color: var(--warning);">Em Análise</td>
                            <td>Hoje 10:00</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px;">#099</td>
                            <td>Solicitação Mouse</td>
                            <td>Periféricos</td>
                            <td style="color: var(--primary);">Novo</td>
                            <td>Ontem</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="modal-perfil" class="overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Meu Cadastro</h3>
                <i class="fa-solid fa-times close-btn" onclick="fecharModais()"></i>
            </div>
            
            <div class="tabs">
                <div class="tab active" onclick="mudarAba('pessoal', this)">Pessoal</div>
                <div class="tab" onclick="mudarAba('preferencias', this)">Preferências</div>
                <div class="tab" onclick="mudarAba('notificacoes', this)">Notificações</div>
            </div>

            <div class="modal-body">
                <div id="tab-pessoal" class="tab-content active">
                    <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                        <div class="avatar" style="width: 80px; height: 80px; font-size: 30px; cursor: pointer;" onclick="alert('Janela de arquivos do Windows aberta!')">
                            <i class="fa-solid fa-camera"></i>
                        </div>
                        <div style="flex: 1;">
                            <label class="form-label">Nome Completo *</label>
                            <input type="text" class="form-control" value="Kaleb Nunes">
                            <div style="margin-top: 10px; font-size: 12px; color: #ccc;">
                                <input type="checkbox" checked style="width: auto;"> Habilitado
                                <input type="checkbox" style="width: auto; margin-left: 10px;"> Administrador
                            </div>
                        </div>
                    </div>
                    <div class="form-grid">
                        <div><label class="form-label">E-mail</label><input type="text" class="form-control" value="kaleb.nunes@kns.com.br"></div>
                        <div><label class="form-label">Telefone</label><input type="text" class="form-control" value="(47) 9999-9999"></div>
                    </div>
                    <div class="form-grid">
                        <div><label class="form-label">Idioma *</label>
                            <select class="form-control" style="background:#0a0b0d; color:#fff"><option>Português do Brasil</option><option>English</option></select>
                        </div>
                        <div><label class="form-label">Senha</label><input type="password" class="form-control" placeholder="Alterar senha..."></div>
                    </div>
                    <label class="form-label">Endereço</label>
                    <input type="text" class="form-control" value="Balneário Camboriú, SC - Brasil">
                </div>

                <div id="tab-preferencias" class="tab-content">
                    <div class="form-grid">
                        <div><label class="form-label">Grupo *</label><input type="text" class="form-control" value="TI - Operações Globais"></div>
                        <div><label class="form-label">Cliente *</label><input type="text" class="form-control" value="KNS Consultoria"></div>
                    </div>
                    <div class="form-grid">
                        <div><label class="form-label">Perfil de Atendente</label><input type="text" class="form-control" value="Administrador do Sistema" disabled></div>
                        <div><label class="form-label">Licença</label><input type="text" class="form-control" value="Licença Enterprise" disabled></div>
                    </div>
                    <div style="margin-top: 15px;">
                        <label class="form-label" style="display:flex; align-items:center; gap:10px;"><input type="checkbox" style="width:auto;"> Visualizar subitens do menu em ordem alfabética</label>
                        <label class="form-label" style="display:flex; align-items:center; gap:10px;"><input type="checkbox" checked style="width:auto;"> Receber e-mails de chamados encerrados</label>
                    </div>
                </div>

                <div id="tab-notificacoes" class="tab-content">
                    <table class="notif-table">
                        <thead>
                            <tr><th>Notificação</th><th style="text-align:center">Central</th><th style="text-align:center">E-mail</th><th style="text-align:center">Som</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Chamado: Abertura</td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td><td style="text-align:center"><input type="checkbox" class="check-box"></td></tr>
                            <tr><td>Chamado: Encerramento</td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td><td style="text-align:center"><input type="checkbox" class="check-box"></td></tr>
                            <tr><td>Compromisso: Novo</td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td><td style="text-align:center"><input type="checkbox" class="check-box"></td><td style="text-align:center"><input type="checkbox" checked class="check-box"></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div style="padding: 15px; border-top: 1px solid var(--border); text-align: right;">
                <button onclick="showToast('Dados salvos com sucesso!')" style="background: var(--success); color: #000; border: none; padding: 10px 20px; border-radius: 4px; font-weight: bold; cursor: pointer;">Salvar</button>
            </div>
        </div>
    </div>

    <div id="modal-cliente" class="overlay">
        <div class="modal" style="width: 800px;">
            <div class="modal-header">
                <h3>Área do Cliente</h3>
                <i class="fa-solid fa-times close-btn" onclick="fecharModais()"></i>
            </div>
            <div class="modal-body">
                <div class="client-stats">
                    <div class="trophy-card">
                        <i class="fa-solid fa-trophy trophy-icon"></i>
                        <h2 style="color: var(--danger); margin: 0;">Plano Enterprise</h2>
                        <h3 style="color: #fff; margin: 5px 0 20px 0;">Ilimitado</h3>
                        <div style="text-align: left; font-size: 12px; color: #aaa; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div><i class="fa-solid fa-check" style="color:var(--success)"></i> Fluxo de E-mail</div>
                            <div><i class="fa-solid fa-check" style="color:var(--success)"></i> API Integração</div>
                            <div><i class="fa-solid fa-check" style="color:var(--success)"></i> SLA Manager</div>
                            <div><i class="fa-solid fa-check" style="color:var(--success)"></i> KNS Automation</div>
                        </div>
                    </div>
                    
                    <div style="flex: 1; padding: 20px; border: 1px solid var(--border); border-radius: 8px;">
                        <h4 style="margin-bottom: 20px;">Estatísticas de Uso</h4>
                        
                        <div style="margin-bottom: 15px;">
                            <div style="display:flex; justify-content:space-between; font-size:12px; color:#ccc; margin-bottom:5px;">
                                <span>Licenças Ativas</span> <span>150 / 200</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill" style="width: 75%;"></div></div>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <div style="display:flex; justify-content:space-between; font-size:12px; color:#ccc; margin-bottom:5px;">
                                <span>Armazenamento</span> <span>450 GB / 1024 GB</span>
                            </div>
                            <div class="progress-bar"><div class="progress-fill" style="width: 45%; background: var(--warning);"></div></div>
                        </div>

                        <div style="text-align: center; margin-top: 30px;">
                            <p style="font-size: 12px; color: #888;">Precisa de mais recursos?</p>
                            <button style="background: var(--primary); color: #000; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; margin-top: 5px;">Fale Conosco</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-novo-chamado" class="overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Novo Chamado #105</h3>
                <i class="fa-solid fa-times close-btn" onclick="fecharModais()"></i>
            </div>
            <div class="modal-body">
                <label class="form-label">Título *</label>
                <input type="text" class="form-control" style="margin-bottom: 15px;">
                
                <div class="form-grid">
                    <div><label class="form-label">Cliente</label><input type="text" class="form-control" value="KNS Internal"></div>
                    <div><label class="form-label">Solicitante</label><input type="text" class="form-control" value="Kaleb Nunes"></div>
                </div>
                
                <label class="form-label">Descrição</label>
                <textarea class="form-control" rows="5" style="background:#0a0b0d; color:#fff; border:1px solid #333; width:100%;"></textarea>
            </div>
            <div style="padding: 15px; text-align: right; border-top: 1px solid var(--border);">
                <button onclick="showToast('Chamado registrado!')" style="background: var(--success); color: #000; border: none; padding: 10px 20px; border-radius: 4px; font-weight: bold; cursor: pointer;">Registrar</button>
            </div>
        </div>
    </div>

    <div id="toast">Mensagem Aqui</div>

    <script>
        // 1. GATEKEEPER
        if(!localStorage.getItem('kns_session')) {
            window.location.href = 'index.html';
        }

        // 2. TOGGLE MENU
        function toggleMenu() {
            const menu = document.getElementById('user-menu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        // Fecha menu ao clicar fora
        window.onclick = function(event) {
            if (!event.target.closest('.user-trigger')) {
                document.getElementById('user-menu').style.display = 'none';
            }
        }

        // 3. LOGOUT
        function logout() {
            localStorage.removeItem('kns_session');
            window.location.href = 'index.html';
        }

        // 4. SISTEMA DE MODAIS
        function abrirModal(id) {
            document.getElementById(id).style.display = 'flex';
            document.getElementById('user-menu').style.display = 'none'; // Fecha menu se estiver aberto
        }

        function fecharModais() {
            const modais = document.querySelectorAll('.overlay');
            modais.forEach(m => m.style.display = 'none');
        }

        // 5. ABAS DO PERFIL
        function abrirPerfil(abaInicial) {
            abrirModal('modal-perfil');
            // Simula clique na aba correta
            const tabEl = document.querySelector(`.tab[onclick*="${abaInicial}"]`);
            if(tabEl) mudarAba(abaInicial, tabEl);
        }

        function mudarAba(nomeId, elemento) {
            // Reseta abas
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            // Ativa nova
            elemento.classList.add('active');
            document.getElementById('tab-' + nomeId).classList.add('active');
        }

        // 6. TOAST
        function showToast(msg) {
            var x = document.getElementById("toast");
            x.innerHTML = '<i class="fa-solid fa-check-circle"></i> ' + msg;
            x.className = "show";
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
            fecharModais();
        }

        // 7. CRIAR USUÁRIO DEMO
        function criarUsuarioDemo() {
            if(confirm("Deseja criar o usuário 'demo' com privilégios limitados?")) {
                showToast("Usuário DEMO criado com sucesso.");
            }
        }
    </script>
</body>
</html>